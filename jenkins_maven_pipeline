pipeline {
    agent {label 'slave' }
        tools{
   maven 'maven_test'
    stages{
        stage('checkout _scm'){
            steps {
                checkout scm
            }
        }
        stage('Maven_Build'){
            steps {
                sh 'mvn clean package'
            }
        }
        stage('Deploy_Tomca'){
            steps{
            sshagent(['Tomcat-Deployment-server']){
                sh "scp -scp -o StrictHostKeyChecking=no  target/maven-web-application.war  ec2-user@52.66.196.158:/opt/tomcat9/webapps"
            }
        }
        }
    }
}
}
